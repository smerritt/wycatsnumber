<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Find your wycats number</title>
    <script src="jquery.min.js"></script>
    <script src="jquery.watermarkinput.js"></script>
    <script src="util.js"></script>
    <script src="index.js"></script>
    <link href="index.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <div id="templates" style="display:none;">
      <div class="success_header">
        <h1>
          Your <span class="source_author">replace-me</span> number
          is <span class="path_length">replace-me</span>.
        </h1>
      </div>

      <div class="author_path_component path_component">
        <div class="user_with_picture">
          <div class="gravatar">
            <img alt="" class="gravatar"/>
          </div>
          <div class="username">
            <a class="username"
               href="replace-me-with-github-link"><span class="author">replace-me</span></a>
          </div>

        </div>
      </div>

      <div class="project_path_component path_component">
        <div class="arrow_container">
          <img src="images/downarrow.gif" />
        </div>
        <p class="project_link">
          <a class="project_link" href="replace-me">replace-me</a>
        </p>
        <div class="arrow_container">
          <img src="images/downarrow.gif" />
        </div>
      </div>

      <div class="your_number">
        <p class="your_number"><span class="source">replace-me</span>'s
          <span class="destination">replace-me</span>
          number is <span class="the_number">N</span>.
      </div>

      <div class="disconnected">
        <p class="no_number"><span class="source">replace-me</span>
        does not have a
        defined <span class="destination">replace-me</span>
        number.</p>

        <p><span class="short_desc">We know about both of them, but
            they're not connected.</span> If one or both of them have
            only recently made commits to public projects with multiple
            contributors, then it may take a while (days or weeks) for
            our database to catch up. Our GitHub-crawling robots can
            only work so fast.
        </p>
      </div>

      <div class="unknown_authors">
        <h1>I.P. Freely? Does anyone know I.P. Freely?</h1>
        <h2>We can't find
          <span class="unknown_author_names">replace-me-with-author-names</span>
          in our database.
        </h2>
        <p><span class="short_desc">Maybe there's a typo in their
          GitHub username.</span> Does their username have OddLY
          PlACeD CaPiTaL LeTT3Rs? If so, you'll just have to put a
          little extra wear and tear on your shift key and type it in;
          these things are case-sensitive.</p>

        <p><span class="short_desc">Maybe they're just not big
          open-source contributors.</span> If they haven't contributed
          to any public projects on GitHub, there's no way that our
          GitHub-crawling robots can find them. The robots can't see
          private repositories.</p>

        <p><span class="short_desc">Maybe they're off in their own
          little world.</span> They could have commits in public
          projects, but there's just no way to reach our
          arbitrarily-chosen starting point
          of <a href="https://github.com/rails/rails">rails/rails</a>
          from their repositories.</p>

        <p><span class="short_desc">Maybe they've only recently
          started contributing.</span> The data that our graph is
          built from may be up to a month stale. This is because
          GitHub has a rate limiter on their API, and so the robots
          can only check them for updates every so often.</p>

        <p><span class="short_desc">And maybe, of course, there's a
          bug in our code
          somewhere.</span> <a href="https://github.com/smerritt/wycatsnumber">Take
          a look and see if you can spot it</a>.
      </div>

      <div class="error">
        <h1>Well, crap. It's broken.</h1>
        <p><span class="error_description">replace-me</span> Maybe the
          server's on fire. You can try again, but you may have to
          wait until someone puts the server out.</p>
      </div>

    </div> <!-- templates -->

    <div id="#header">
      <div id="tabs">
        <div id="path_finder_tab" class="tab">
          <a href="#">Find yours!</a>
        </div>

        <div id="explainer_of_the_rules_tab" class="tab">
          <a href="#">What is this?</a>
        </div>

        <div id="explainer_of_why_tab" class="tab">
          <a href="#">Why do it like this?</a>
        </div>

        <div id="technology_tab" class="tab">
          <a href="#">The technology!</a>
        </div>
      </div> <!-- tabs -->

      <div id="panes">
        <div id="path_finder" class="pane">
          <form id="path_form">
            Find a path from
            <input id="source" type="text" class="inputHint" title="GitHub username" />
            to
            <input id="destination" type="text" value="wycats" />

            <input type="submit" value="Go!" />
          </form>
        </div> <!-- path_finder -->

        <div id="explainer_of_the_rules" class="pane">
          <p>The wycats number:
            the <a href="http://en.wikipedia.org/wiki/Erdos_number">Erdos
              number</a> for the Ruby community.</p>

          <p>How it works:
            <ol>
              <li class="rule"><a href="http://yehudakatz.com">Yehuda Katz</a>
                (<a href="https://github.com/wycats">wycats</a>) has wycats
                number 0.</li>

              <li class="rule">If you and wycats have collaborated on the
                same public GitHub repository, then your wycats number is 1.
              </li>

              <li class="rule">Otherwise, your wycats number is the
                minimum wycats number of anyone you have collaborated with
                on a public GitHub project plus one.</li>
            </ol>
          </p>
        </div> <!-- explainer_of_the_rules -->

        <div id="explainer_of_why" class="pane">
          <dl>
            <dt>Why wycats?</dt>

            <dd>Paul Erdos worked with a whole bunch of different
              mathematicians, and so he makes a natural center for the
              mathematical community. Likewise, Yehuda Katz worked with
              a whole bunch of people on a whole bunch of important Ruby
              projects, so he makes a natural center for the Ruby
              community.</dd>

            <dt>That's dumb. Clearly, so-and-so is the logical choice.</dt>

            <dd>Fine. You can get your so-and-so number too; just type
              their GitHub username into the box.</dd>

            <dt>Why don't I have a wycats number of 1? I totally have a
              fork of Rails that I've committed a bunch of stuff to.</dt>

            <dd>Forks don't count. Your commits to Rails have to make
              it to
              the <a href="https://github.com/rails/rails">canonical
              repository</a>. Same goes for forks of any other
              projects.</dd>

            <dt>Can't I just make some public project on my repository,
              make a couple commits as me@example.com, and then a couple
              using wycats's email address?</dt>

            <dd>Yes, but please don't. It's like peeing in the pool:
              you'll feel good for a minute, but if others notice, they'll
              think you're a jerk.</dd>
          </dl>
        </div> <!-- explainer_of_why -->

        <div id="technology" class="pane">
          <p>The technology behind this is composed of three main
          parts: the fetcher, the API, and the page.</p>

          <p>The fetcher is the GitHub-crawling robot that's
          responsible for fetching collaboration data for public
          repositories. It's written in Ruby and is basically just a
          set
          of <a href="https://github.com/defunkt/resque">Resque</a>
          jobs that use the <a href="http://develop.github.com/">GitHub API</a>
          to populate the database and enqueue other Resque jobs.
          </p>

          <p>The API is the webapp responsible for actually computing
          the paths between different authors. It's
          a <a href="http://compojure.org/">Compojure</a> application
          that provides a couple of API routes. It manages to be as
          fast as it is by building a graph out of all the authors and
          projects when it starts up and then just keeping that in
          memory. That makes it a bona fide memory hog, but it's the
          only way I could get it reasonably fast without using many
          many terabytes of disk to store the graph's predecessor
          matrix.</p>

          <p>The page is this thing you're looking at right now. It's
          a Javascript + <a href="http://jquery.com/">jQuery</a>
          application written
          by <a href="https://github.com/smerritt">some bozo</a>
          who doesn't really do Javascript applications. It seems to
          work, but that's about all you can say for it.</p>

          <p>The code for all three parts lives in the
          same <a href="https://github.com/smerritt/wycatsnumber">repository</a>;
          take a look if you're curious.
        </div>

      </div> <!-- panes -->
    </div> <!-- header -->

    <div id="content">
    </div>

  </body>
</html>
